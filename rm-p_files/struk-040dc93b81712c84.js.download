(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9286],{95648:function(a,b,c){(window.__NEXT_P=window.__NEXT_P||[]).push(["/app/sale/struk",function(){return c(61763)}])},88847:function(g,d,a){"use strict";var h=a(85893),e=a(65612),i=a.n(e),f=a(45697),b=a.n(f),c=function(a){var b=a.className,c=a.color,d=a.size,e=[i().spinner,i()[c],i()[d]].join(" ");return(0,h.jsx)("div",{className:b,children:(0,h.jsx)("div",{className:e})})};d.Z=c,c.defaultProps={className:"",color:"",size:"sm"},c.propTypes={className:b().string,color:b().string,size:b().string}},78355:function(c,b,a){"use strict";a.d(b,{Z:function(){return d.Z}});var d=a(88847)},61763:function(f,b,a){"use strict";a.r(b),a.d(b,{default:function(){return c}});var g=a(85893),h=a(72445),i=a(42929),j=a(77074),k=a(46289),l=a(11163),d=a(45697),e=a.n(d),m=a(7711),n=a(67294),o=a(69206),p=a(24577),q=a(78355),r=a(28623),s=a(25658),t=a(3751),u=a(34462);function c(){var d,e,O=(0,l.useRouter)(),a=(0,n.useContext)(k.A).customer,b=(0,n.useContext)(j.V).auth,P=(0,n.useContext)(p.z).setToastr,v=(0,n.useState)(!1),C=v[0],w=v[1],x=(0,n.useState)(!1),D=x[0],y=x[1],z=(0,n.useState)(!1),E=z[0],F=z[1],A=(0,n.useState)(!1),G=A[0],H=A[1],B=(0,n.useState)(""),I=B[0],J=B[1],K=new Date,f=(0,t.useTimer)({expiryTimestamp:K,onExpire:function(){H(!1),J(""),F(!1)},autoStart:!1}),L=f.seconds,M=f.minutes,Q=f.restart,c=r.aj((null==a?void 0:a.dataScanQR)?null==a?void 0:null===(d=a.data)|| void 0===d?void 0:d.transactionId:null==a?void 0:a.transactionId,null==b?void 0:b.accessToken),N=m.o_(null==a?void 0:a.transactionId,null==b?void 0:b.accessToken,function(a){var b,d;if(a.success&&(y(!1),P({color:"success",message:"Berhasil Membatalkan Transaksi",isOpen:!0,time:3e3}),c.refetch(),F(!1)),!(null===(b=a.response)|| void 0===b?void 0:null===(d=b.data)|| void 0===d?void 0:d.success)){if((null==a?void 0:null===(i=a.response)|| void 0===i?void 0:null===(j=i.data)|| void 0===j?void 0:j.message.includes("PIN"))&&J(null==a?void 0:null===(n=a.response)|| void 0===n?void 0:null===(o=n.data)|| void 0===o?void 0:o.message),null==a?void 0:null===(k=a.response)|| void 0===k?void 0:null===(l=k.data)|| void 0===l?void 0:null===(m=l.data)|| void 0===m?void 0:m.countdownTime){var i,j,k,l,m,n,o,e,f,g,h=new Date;h.setSeconds(h.getSeconds()+(null==a?void 0:null===(e=a.response)|| void 0===e?void 0:null===(f=e.data)|| void 0===f?void 0:null===(g=f.data)|| void 0===g?void 0:g.countdownTime)/1e3),Q(h),H(!0),J(""),F(!0)}N.reset(),F(!1)}});return c.isFetching?(0,g.jsx)(g.Fragment,{children:(0,g.jsx)(q.Z,{})}):(0,g.jsxs)(h.W,{px:"0",py:"0",size:"sm",children:[(0,g.jsx)(u.Z,{dataTestId:"btnBack",onClick:function(){return O.push("/app/sale")},title:"Struk",type:"centerTitle"}),(0,g.jsx)(i.Z,{fetchTransactionDetail:null==c?void 0:null===(e=c.data)|| void 0===e?void 0:e.data,isLoading:c.isFetching,setModalConfirmation:w}),(0,g.jsx)(o.a,{alertError:G,disableBtn:E,fetchCancelTransaction:N,handleSubmitCancelTrx:function(a){delete a.otherReason,F(!0),N.mutate(a)},minutes:M,msgError:I,openModal:D,seconds:L,setAlertError:H,setDisableBtn:F,setModalCancel:y,setMsgError:J}),(0,g.jsx)(s.Z,{modalConfirmation:C,setModalCancel:y,setModalConfirmation:w})]})}c.defaultProps={data:[]},c.propTypes={data:e().array}},65612:function(a){a.exports={spinner:"style_spinner__HFVr_","spinner-zp9dbg":"style_spinner-zp9dbg__C5FMH",red:"style_red__ZWFE2",blue:"style_blue__vQsOX",sm:"style_sm__XYUgc",md:"style_md__UAe59",lg:"style_lg__pbGwM"}}},function(a){a.O(0,[5443,7847,7038,6148,7536,4457,4826,194,3057,1544,5947,9774,2888,179],function(){var b;return a(a.s=95648)}),_N_E=a.O()}])